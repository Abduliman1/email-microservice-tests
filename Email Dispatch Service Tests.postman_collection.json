{
	"info": {
		"_postman_id": "c69032ac-8097-4571-b66c-be292eedd594",
		"name": "Email Dispatch Service Tests",
		"description": "Automated functional tests for the /send-email API endpoint",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "47138474",
		"_collection_link": "https://orbital-module-cosmonaut-38228350-5176055.postman.co/workspace/67b04fa4-ff65-4ed4-83e9-dabdce8c7793/collection/47138474-c69032ac-8097-4571-b66c-be292eedd594?action=share&source=collection_link&creator=47138474"
	},
	"item": [
		{
			"name": "Valid Request Returns 202",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.test(\"Status code is 202 - Accepted\", function () {\r",
							"    pm.response.to.have.status(202);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"to\": \"Abdulmifsuleiman@gmail.com\",\r\n  \"subject\": \"Welcome!\",\r\n  \"body\": \"Thanks for signing up.\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "/send-email",
					"path": [
						"send-email"
					]
				}
			},
			"response": []
		},
		{
			"name": "Missing to Returns 400",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400 or 422 - Missing 'to'\", function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"subject\": \"Missing recipient\",\r\n  \"body\": \"No 'to' field\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "/send-email",
					"path": [
						"send-email"
					]
				}
			},
			"response": []
		},
		{
			"name": "Invalid Email Returns 400",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400 or 422 - Invalid email format\", function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([400, 422]);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"to\": \"Abdulmifsuleiman.com\",\r\n  \"subject\": \"Invalid email test\",\r\n  \"body\": \"Testing invalid email format\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "/send-email",
					"path": [
						"send-email"
					]
				}
			},
			"response": []
		},
		{
			"name": "Simulate Queue Full Returns 503",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.test(\"Status code is 503 - Queue full\", function () {\r",
							"    pm.response.to.have.status(503);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"to\": \"Abdulmifsuleiman@gmail.com\",\r\n  \"subject\": \"simulate queue full\",\r\n  \"body\": \"This subject triggers queue full\"\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "/send-email",
					"path": [
						"send-email"
					]
				}
			},
			"response": []
		}
	]
}